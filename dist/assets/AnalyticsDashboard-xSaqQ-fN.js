import{r,j as e,K as C,m as a,$ as D,a0 as G,U as b,T as R,a1 as A,a2 as p,a3 as L,k as T,a4 as U,B,a5 as E}from"./ui-vendor-Odbjkxui.js";import"./react-vendor-QxjEytrN.js";const P={totalSignups:0,dailySignups:0,weeklyGrowth:0,monthlyGrowth:0,topCountries:[],deviceBreakdown:[],browserBreakdown:[],referralSources:[],scrollDepthData:[],timeOnPageData:[],utmCampaigns:[],recentSignups:[]},M=({isAdmin:N=!1,onExport:x})=>{const[t,w]=r.useState(P),[g,j]=r.useState(!1),[n,f]=r.useState("30d"),l=r.useMemo(()=>({card:"bg-white/10 backdrop-blur-xl border-white/20",hover:"hover:border-purple-400/50 hover:bg-white/15",text:"bg-gradient-to-r from-purple-400 via-pink-500 to-cyan-500 bg-clip-text text-transparent",primary:"bg-gradient-to-br from-purple-600 via-pink-600 to-cyan-600",success:"bg-gradient-to-br from-green-600 to-emerald-600",warning:"bg-gradient-to-br from-yellow-600 to-orange-600"}),[]),u=r.useCallback(async()=>{j(!0);try{const s=await fetch(`/api/analytics?timeframe=${n}`);if(s.ok){const c=await s.json();w(c)}}catch(s){console.error("Failed to fetch analytics data:",s)}finally{j(!1)}},[n]),v=r.useCallback(()=>{if(x)x(t);else{const s=S(t);k(s,`waitlist-analytics-${n}.csv`)}},[t,n,x]),S=s=>{const c=["Metric","Value","Percentage"],o=[["Total Signups",s.totalSignups.toString(),"100%"],["Daily Signups",s.dailySignups.toString(),""],["Weekly Growth",`${s.weeklyGrowth}%`,""],["Monthly Growth",`${s.monthlyGrowth}%`,""]];return s.topCountries.forEach(i=>{o.push([i.country,i.count.toString(),`${i.percentage}%`])}),[c,...o].map(i=>i.join(",")).join(`
`)},k=(s,c)=>{const o=new Blob([s],{type:"text/csv"}),i=window.URL.createObjectURL(o),h=document.createElement("a");h.href=i,h.download=c,h.click(),window.URL.revokeObjectURL(i)},$=r.useCallback(()=>{u()},[u]),d=s=>s.toLocaleString(),m=s=>`${s.toFixed(1)}%`,y=s=>s>0?e.jsx(p,{className:"w-4 h-4 text-green-400"}):s<0?e.jsx(E,{className:"w-4 h-4 text-red-400"}):null;return N?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-black p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:e.jsx("span",{className:l.text,children:"AI Waitlist Analytics"})}),e.jsx("p",{className:"text-gray-300",children:"Real-time insights into your waitlist performance"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:n,onChange:s=>f(s.target.value),className:"px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-purple-400/50",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:$,disabled:g,className:"p-2 rounded-lg bg-white/10 border border-white/20 text-white hover:bg-white/20 transition-colors disabled:opacity-50",children:e.jsx(D,{className:`w-5 h-5 ${g?"animate-spin":""}`})}),e.jsxs(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:v,className:`px-6 py-2 rounded-lg text-white font-semibold flex items-center gap-2 ${l.primary}`,children:[e.jsx(G,{className:"w-4 h-4"}),"Export CSV"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`p-6 rounded-2xl ${l.card} border-purple-400/30`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(b,{className:"w-8 h-8 text-purple-400"}),e.jsxs("div",{className:"flex items-center gap-1",children:[y(t.monthlyGrowth),e.jsxs("span",{className:"text-green-400 text-sm font-semibold",children:["+",m(t.monthlyGrowth)]})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:d(t.totalSignups)}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Signups"})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`p-6 rounded-2xl ${l.card} border-green-400/30`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(R,{className:"w-8 h-8 text-green-400"}),e.jsxs("div",{className:"flex items-center gap-1",children:[y(t.weeklyGrowth),e.jsxs("span",{className:"text-green-400 text-sm font-semibold",children:["+",m(t.weeklyGrowth)]})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:d(t.dailySignups)}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Daily Signups"})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:`p-6 rounded-2xl ${l.card} border-blue-400/30`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(A,{className:"w-8 h-8 text-blue-400"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-green-400 text-sm font-semibold",children:"+2.3%"}),e.jsx("div",{className:"text-xs text-red-400",children:"(not real data)"})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"24.7%"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Conversion Rate"}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("span",{className:"text-red-400 text-xs",children:"(not real data)"})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`p-6 rounded-2xl ${l.card} border-yellow-400/30`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(L,{className:"w-8 h-8 text-yellow-400"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-green-400 text-sm font-semibold",children:"+12s"}),e.jsx("div",{className:"text-xs text-red-400",children:"(not real data)"})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"2m 34s"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Avg Time on Page"}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("span",{className:"text-red-400 text-xs",children:"(not real data)"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:`p-6 rounded-2xl ${l.card} border-purple-400/30`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(T,{className:"w-6 h-6 text-purple-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Geographic Distribution"})]}),e.jsx("div",{className:"space-y-4",children:t.topCountries.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-400"}),e.jsx("span",{className:"text-white font-medium",children:s.country})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-400 to-pink-400 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsx("span",{className:"text-gray-300 text-sm w-12 text-right",children:d(s.count)})]})]},s.country))})]}),e.jsxs(a.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:`p-6 rounded-2xl ${l.card} border-green-400/30`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(U,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Device Breakdown"})]}),e.jsx("div",{className:"space-y-4",children:t.deviceBreakdown.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),e.jsx("span",{className:"text-white font-medium",children:s.device})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-400 to-emerald-400 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsx("span",{className:"text-gray-300 text-sm w-12 text-right",children:m(s.percentage)})]})]},s.device))})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:`p-6 rounded-2xl ${l.card} border-blue-400/30`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(B,{className:"w-6 h-6 text-blue-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Referral Sources"})]}),e.jsx("div",{className:"space-y-4",children:t.referralSources.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-400"}),e.jsx("span",{className:"text-white font-medium",children:s.source})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-cyan-400 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsx("span",{className:"text-gray-300 text-sm w-12 text-right",children:d(s.count)})]})]},s.source))})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:`p-6 rounded-2xl ${l.card} border-yellow-400/30`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(b,{className:"w-6 h-6 text-yellow-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Recent Signups"})]}),e.jsx("div",{className:"space-y-4",children:t.recentSignups.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:s.email}),s.mobileNumber&&e.jsx("p",{className:"text-gray-500 text-xs",children:s.mobileNumber})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-300 text-sm",children:s.source}),e.jsx("p",{className:"text-gray-400 text-xs",children:s.location})]})]},s.id))})]})]})]})}):e.jsx("div",{className:"flex items-center justify-center min-h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Admin access required"})]})})},O=r.memo(M);export{O as default};
