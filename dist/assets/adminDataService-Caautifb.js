import{s as B}from"./supabase-DNr-ekoC.js";import{googleAnalyticsService as d}from"./googleAnalyticsService-BEruA-Y8.js";import"./data-vendor-wxR4B97s.js";import"./react-vendor-QxjEytrN.js";const c=[{id:"1",title:"Pathaan 2",type:"film",category:"Bollywood",language:"Hindi",status:"active",fundedPercentage:85,targetAmount:15e6,raisedAmount:1275e4,createdAt:"2023-12-15T10:30:00Z",updatedAt:"2024-01-20T14:45:00Z",poster:"https://m.media-amazon.com/images/M/MV5BOGY4NWNlM2QtMzVjYy00OGY1LWI4N2UtZDNlYWE2ZThjYmRmXkEyXkFqcGdeQXVyMTUzNTgzNzM0._V1_FMjpg_UX1000_.jpg",tags:["action","thriller","bollywood"],description:"The sequel to the blockbuster Pathaan",genre:"Action",perks:["Meet & Greet","VIP Screening","Merchandise"],director:"Siddharth Anand",cast:["Shah Rukh Khan","Deepika Padukone","John Abraham"],rating:8.5,trailer:"https://www.youtube.com/watch?v=pathaan2",keyPeople:[],disabled:!1},{id:"2",title:"A.R. Rahman: Symphony of India",type:"music",category:"Bollywood",language:"Hindi",status:"active",fundedPercentage:95,targetAmount:5e6,raisedAmount:475e4,createdAt:"2023-11-10T08:15:00Z",updatedAt:"2024-01-15T11:20:00Z",poster:"https://i.scdn.co/image/ab67616d0000b273f54b99bf27cda88f4a7403ac",tags:["music","classical","bollywood"],description:"A.R. Rahman's latest musical masterpiece",genre:"Classical",perks:["Concert Tickets","Signed Album","Backstage Pass"],rating:8.8,trailer:"https://www.youtube.com/watch?v=rahman-symphony",keyPeople:[],disabled:!1},{id:"3",title:"Sacred Games 3",type:"webseries",category:"Indian",language:"Hindi",status:"pending",fundedPercentage:45,targetAmount:12e6,raisedAmount:54e5,createdAt:"2024-01-05T09:45:00Z",updatedAt:"2024-01-25T16:30:00Z",poster:"https://m.media-amazon.com/images/M/MV5BMzRjZWVmMzItNTdmYS00OWEzLTgyOGUtNThiNTU2ZThlYjY0XkEyXkFqcGdeQXVyOTAzMTc2MjA@._V1_FMjpg_UX1000_.jpg",tags:["crime","drama","thriller"],description:"The final season of the critically acclaimed series",genre:"Crime Drama",perks:["Exclusive Screening","Meet Cast","Behind the Scenes"],director:"Vikramaditya Motwane",cast:["Saif Ali Khan","Nawazuddin Siddiqui"],rating:8.9,trailer:"https://www.youtube.com/watch?v=sacred-games-3",keyPeople:[],disabled:!1}],m=[{id:"1",title:"Pathaan 2 Limited Edition T-Shirt",category:"apparel",price:1299,stock:150,status:"in_stock",createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-20T14:30:00Z",image:"/images/merch/pathaan-tshirt.jpg",description:"Exclusive limited edition t-shirt featuring Pathaan 2 artwork",tags:["limited","exclusive","apparel"],projectId:"1",size:"M, L, XL",color:"Black, Red",material:"100% Cotton"},{id:"2",title:"A.R. Rahman Vinyl Record",category:"collectibles",price:2499,stock:50,status:"in_stock",createdAt:"2024-01-05T09:00:00Z",updatedAt:"2024-01-15T11:00:00Z",image:"/images/merch/rahman-vinyl.jpg",description:"Collector's edition vinyl record of Symphony of India",tags:["collector","vinyl","limited"],projectId:"2",material:"Vinyl"},{id:"3",title:"Sacred Games Poster Set",category:"collectibles",price:599,stock:8,status:"low_stock",createdAt:"2024-01-15T12:00:00Z",updatedAt:"2024-01-25T16:00:00Z",image:"/images/merch/sacred-games-poster.jpg",description:"Exclusive poster set from Sacred Games Season 3",tags:["poster","exclusive","art"],projectId:"3",material:"Premium Paper"}],g=[{id:"1",title:"Meet & Greet with Shah Rukh Khan",description:"Exclusive meet and greet session with the superstar",price:5e3,category:"experience",status:"available",createdAt:"2024-01-10T10:00:00Z",updatedAt:"2024-01-20T14:30:00Z",projectId:"1",maxQuantity:20,currentQuantity:15,expiryDate:"2024-12-31",requirements:["Valid ID","Dress Code: Smart Casual"]},{id:"2",title:"A.R. Rahman Concert VIP Pass",description:"VIP access to the Symphony of India concert",price:3500,category:"experience",status:"limited",createdAt:"2024-01-05T09:00:00Z",updatedAt:"2024-01-15T11:00:00Z",projectId:"2",maxQuantity:100,currentQuantity:85,expiryDate:"2024-06-30",requirements:["Concert Venue Entry","Age: 18+"]},{id:"3",title:"Signed Sacred Games Script",description:"Authentic signed script from Sacred Games Season 3",price:1999,category:"merchandise",status:"available",createdAt:"2024-01-15T12:00:00Z",updatedAt:"2024-01-25T16:00:00Z",projectId:"3",maxQuantity:50,currentQuantity:30,expiryDate:"2024-09-30"}],p=[{id:"1",name:"John Doe",email:"john.doe@email.com",role:"premium",status:"active",createdAt:"2023-06-15T10:30:00Z",updatedAt:"2024-01-20T14:45:00Z",avatar:"/images/avatars/john-doe.jpg",phone:"+91 98765 43210",location:"Mumbai, India",totalInvested:25e3,projectsBacked:5,lastLogin:"2024-01-20T14:45:00Z"},{id:"2",name:"Jane Smith",email:"jane.smith@email.com",role:"user",status:"active",createdAt:"2023-08-20T11:15:00Z",updatedAt:"2024-01-18T09:30:00Z",avatar:"/images/avatars/jane-smith.jpg",phone:"+91 98765 43211",location:"Delhi, India",totalInvested:15e3,projectsBacked:3,lastLogin:"2024-01-18T09:30:00Z"},{id:"3",name:"Mike Johnson",email:"mike.johnson@email.com",role:"vip",status:"active",createdAt:"2023-04-10T08:45:00Z",updatedAt:"2024-01-19T16:20:00Z",avatar:"/images/avatars/mike-johnson.jpg",phone:"+91 98765 43212",location:"Bangalore, India",totalInvested:5e4,projectsBacked:8,lastLogin:"2024-01-19T16:20:00Z"}],I=[{id:"1",email:"alex.smith@email.com",name:"Alex Smith",phone:"+91 98765 43213",source:"website",status:"pending",createdAt:"2024-01-20T10:30:00Z",updatedAt:"2024-01-20T10:30:00Z",location:"Mumbai, India",device:"Desktop",referrer:"Google Search"},{id:"2",email:"mike.johnson@email.com",name:"Mike Johnson",phone:"+91 98765 43214",source:"social_media",status:"contacted",createdAt:"2024-01-20T08:15:00Z",updatedAt:"2024-01-20T14:20:00Z",location:"Delhi, India",device:"Mobile",referrer:"Instagram"},{id:"3",email:"sarah.davis@email.com",name:"Sarah Davis",phone:"+91 98765 43215",source:"referral",status:"converted",createdAt:"2024-01-19T16:45:00Z",updatedAt:"2024-01-20T11:30:00Z",location:"Bangalore, India",device:"Tablet",referrer:"Friend Referral"}],Z=[{id:"1",action:"CREATE",entity:"project",entityId:"4",userId:"admin",timestamp:"2024-01-20T14:30:00Z",details:{title:"RRR 2",type:"film"},ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},{id:"2",action:"REGISTER",entity:"user",entityId:"4",userId:"system",timestamp:"2024-01-20T12:15:00Z",details:{email:"john.doe@email.com",name:"John Doe"},ip:"192.168.1.101",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)"},{id:"3",action:"UPDATE",entity:"project",entityId:"1",userId:"admin",timestamp:"2024-01-20T10:45:00Z",details:{fundedPercentage:85,raisedAmount:1275e4},ip:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}];class R{projects=[...c];merchandise=[...m];perks=[...g];users=[...p];waitlistEntries=[...I];activityLogs=[...Z];async getComprehensiveAnalytics(){try{console.log("🔍 getComprehensiveAnalytics called"),console.log("🔍 Initializing GA service..."),await d.initialize(),console.log("🔍 GA service initialized"),console.log("🔍 Getting waitlist analytics...");const a=await this.getWaitlistAnalytics();console.log("🔍 Waitlist analytics received:",{total:a.total}),console.log("🔍 Getting GA enhanced analytics...");const e=await d.getEnhancedAnalytics();console.log("🔍 GA enhanced analytics received:",{totalSessions:e.totalSessions,totalUsers:e.totalUsers}),console.log("🔍 Getting real-time data...");const t=await d.getRealTimeData();console.log("🔍 Real-time data received:",{activeUsers:t.activeUsers,pageViews:t.pageViews});const i={...e.enhancedMetrics,funnelEfficiency:this.calculateFunnelEfficiency(a,e),trafficQuality:this.calculateTrafficQuality(a,e)},n={...a,gaData:{totalSessions:e.totalSessions,totalUsers:e.totalUsers,totalPageViews:e.totalPageViews,avgBounceRate:e.avgBounceRate,avgSessionDuration:e.avgSessionDuration,trafficSources:e.trafficSources,topPages:e.topPages,deviceBreakdown:e.deviceBreakdown,countryBreakdown:e.countryBreakdown,cityBreakdown:e.cityBreakdown,hourlyData:e.hourlyData,dailyData:e.dailyData,conversionFunnel:e.conversionFunnel},enhancedMetrics:i,realTime:{activeUsers:t.activeUsers,currentPageViews:t.pageViews,topActivePages:t.topPages}};return console.log("🔍 Final comprehensive analytics result:",{waitlistTotal:n.total,gaSessions:n.gaData.totalSessions,gaUsers:n.gaData.totalUsers}),n}catch(a){throw console.error("❌ Error getting comprehensive analytics:",a),a}}calculateFunnelEfficiency(a,e){const t=e.totalSessions,i=a.total,n=a.converted;if(t===0)return 0;const s=i/t*100,r=n/i*100;return Math.round((s+r)/2)}calculateTrafficQuality(a,e){const t=e.avgBounceRate,i=e.avgSessionDuration,n=a.averageEngagement,s=Math.max(0,100-t*100),r=Math.min(100,i/300*100),o=Math.min(100,n/100*100);return Math.round((s+r+o)/3)}async getWaitlistAnalytics(){try{console.log("🔍 getWaitlistAnalytics called"),console.log("🔍 Querying Supabase for waitlist data...");const{data:a,error:e}=await B.from("waitlist_signups").select("*").order("created_at",{ascending:!1});if(e)throw console.error("❌ Error fetching waitlist data from Supabase:",e),e;console.log("✅ Supabase query successful, entries found:",a?.length||0),console.log("📊 Sample entry:",a?.[0]);const t=a||[],i=t.length,n=t.filter(l=>l.source==="contacted").length,s=t.filter(l=>l.source==="converted").length,r=t.filter(l=>l.source==="declined").length,o=i-n-s-r,h=i>0?(s/i*100).toFixed(1):"0",y=this.calculateWeeklyData(t),w=this.calculateBreakdown(t,"source"),f=this.calculateBreakdown(t,"device_type"),k=this.calculateBreakdown(t,"country"),v=this.calculateBreakdown(t,"browser"),A=this.calculateBreakdown(t,"os"),T=this.calculateEngagementBreakdown(t),S=this.calculateTimeOfDayBreakdown(t),D=this.calculateDayOfWeekBreakdown(t),b=this.calculateTopReferrers(t),j=this.calculateTopCities(t),M=this.calculateAverageEngagement(t),P=this.calculateAverageTimeOnPage(t),E=this.calculateAverageScrollDepth(t),u={total:i,pending:o,contacted:n,converted:s,declined:r,conversionRate:h,weeklyData:y,sourceBreakdown:w,deviceBreakdown:f,countryBreakdown:k,browserBreakdown:v,osBreakdown:A,engagementBreakdown:T,timeOfDayBreakdown:S,dayOfWeekBreakdown:D,recentEntries:t.slice(0,50),topReferrers:b,topCities:j,averageEngagement:M,averageTimeOnPage:P,averageScrollDepth:E};return console.log("📊 Analytics result:",u),u}catch(a){throw console.error("❌ Error getting waitlist analytics:",a),a}}calculateWeeklyData(a){const e={};return a.forEach(t=>{const i=t.created_at;if(!i)return;const n=new Date(i);if(isNaN(n.getTime()))return;const s=n.getFullYear(),r=Math.ceil((n.getTime()-new Date(s,0,1).getTime())/(7*24*60*60*1e3)),o=`${s}-W${r.toString().padStart(2,"0")}`;e[o]||(e[o]={signups:0,conversions:0}),e[o].signups++,t.source==="converted"&&e[o].conversions++}),Object.entries(e).map(([t,i])=>({week:t,...i})).sort((t,i)=>t.week.localeCompare(i.week)).slice(-12)}calculateBreakdown(a,e){const t={};return a.forEach(i=>{const n=String(i[e]||"Unknown");t[n]=(t[n]||0)+1}),t}calculateEngagementBreakdown(a){const e={Low:0,Medium:0,High:0};return a.forEach(t=>{const i=Number(t.time_on_page)||0,n=Number(t.scroll_depth)||0;let s="Low";i>120&&n>50?s="High":(i>60||n>25)&&(s="Medium"),e[s]=(e[s]||0)+1}),e}calculateTimeOfDayBreakdown(a){const e={};return a.forEach(t=>{const i=t.created_at;if(!i)return;const n=new Date(i);if(isNaN(n.getTime()))return;const r=`${n.getHours().toString().padStart(2,"0")}:00`;e[r]=(e[r]||0)+1}),e}calculateDayOfWeekBreakdown(a){const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t={};return e.forEach(i=>t[i]=0),a.forEach(i=>{const n=i.created_at;if(!n)return;const s=new Date(n);if(isNaN(s.getTime()))return;const r=s.getDay(),o=e[r];o&&(t[o]=(t[o]||0)+1)}),t}calculateTopReferrers(a){const e={};return a.forEach(t=>{const i=t.referrer||"Direct";e[i]=(e[i]||0)+1}),Object.entries(e).map(([t,i])=>({referrer:t,count:i})).sort((t,i)=>i.count-t.count).slice(0,10)}calculateTopCities(a){const e={};return a.forEach(t=>{const i=t.city||"Unknown";e[i]=(e[i]||0)+1}),Object.entries(e).map(([t,i])=>({city:t,count:i})).sort((t,i)=>i.count-t.count).slice(0,10)}calculateAverageEngagement(a){const e=a.reduce((t,i)=>{const n=Number(i.time_on_page)||0,s=Number(i.scroll_depth)||0;return t+(n*.5+s*.5)},0);return a.length>0?Math.round(e/a.length):0}calculateAverageTimeOnPage(a){const e=a.reduce((t,i)=>t+(Number(i.time_on_page)||0),0);return a.length>0?Math.round(e/a.length):0}calculateAverageScrollDepth(a){const e=a.reduce((t,i)=>t+(Number(i.scroll_depth)||0),0);return a.length>0?Math.round(e/a.length):0}async getActivityLogs(){return await this.simulateDelay(),[...this.activityLogs].sort((a,e)=>new Date(e.timestamp).getTime()-new Date(a.timestamp).getTime())}async simulateDelay(){await new Promise(a=>setTimeout(a,Math.random()*500+200))}async exportData(a){await this.simulateDelay();let e;switch(a){case"projects":e=this.projects;break;case"merchandise":e=this.merchandise;break;case"perks":e=this.perks;break;case"users":e=this.users;break;case"waitlist":e=this.waitlistEntries;break;case"activity":e=this.activityLogs;break;default:throw new Error("Invalid export type")}return JSON.stringify(e,null,2)}async getProjects(){return c}async getMerchandise(){return m}async getPerks(){return g}async getUsers(){return p}async createProject(a){const e={...a,id:`proj-${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return c.push(e),e}async updateProject(a,e){const t=c.findIndex(i=>i.id===a);if(t!==-1){const i={...c[t],...e,updatedAt:new Date().toISOString()};return c[t]=i,i}return null}async deleteProject(a){const e=c.findIndex(t=>t.id===a);return e!==-1?(c.splice(e,1),!0):!1}}const U=new R;export{U as adminDataService};
